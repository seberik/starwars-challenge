(this["webpackJsonpstarwars-challenge"]=this["webpackJsonpstarwars-challenge"]||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/loader.65421bef.svg"},,,,,,,,,,,,,function(e,t,n){e.exports=n(41)},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(15),l=n.n(c),i=n(5),u=n(7),s=n(10),o=n.n(s),m=(n(32),function(e){var t=e.loading,n=e.children;return a.a.createElement("button",{className:"button"},t&&a.a.createElement("img",{height:"18",src:o.a,alt:"loading"}),a.a.createElement("span",{className:t?"invisible":""},n))});m.defaultProps={loading:!1,children:void 0};var f=m;n(33);var d=function(e){var t=e.loading;return a.a.createElement("div",{className:"search-field"},a.a.createElement(u.a,{type:"text",placeholder:"Search characters...",name:"query"}),a.a.createElement(f,{loading:t},"Search"))};var p=function(e){var t=e.onSubmit,n=e.loading;return a.a.createElement(u.c,{onSubmit:t,initialValues:{query:""}},a.a.createElement(u.b,null,a.a.createElement(d,{loading:n})))},v=(n(34),function(e){var t=e.children;return a.a.createElement("div",{className:"page-title"},a.a.createElement("h1",null,t))}),h=n(22),E=n(18),b=n.n(E),g=(n(35),function(e){var t=e.children,n=e.noMargin,r=e.selected,c=Object(h.a)(e,["children","noMargin","selected"]);return a.a.createElement("div",Object.assign({},c,{className:b()("list-item",n&&"no-margin",r&&"selected")}),t)}),O=n(2),y=n.n(O),w=n(6),j=n(19),k=n(20),N=function(){function e(t){Object(j.a)(this,e),this.accept="application/json",this.baseURL=t.baseURL,this.cache={}}return Object(k.a)(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.cache[t]){e.next=2;break}return e.abrupt("return",this.cache[t]);case 2:return n=new URL(t,this.baseURL),this.cache[t]=fetch(n.href).then((function(e){return e.json()})).catch((function(){r.cache[t]=void 0})),e.abrupt("return",this.cache[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}())},{key:"getMovies",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t.films.map((function(e){return n.fetch(e)}))).then((function(e){return e.sort((function(e,t){return new Date(t.release_date)-new Date(e.release_date)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"searchPeople",value:function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r,a=this;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetch("/api/people/?search=".concat(t));case 2:return n=e.sent,e.next=5,Promise.all(n.results.map(function(){var e=Object(w.a)(y.a.mark((function e(t){var n,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.fetch(t.homeworld);case 2:return n=e.sent,e.next=5,Promise.all(t.species.map(function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.fetch(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return r=e.sent,e.abrupt("return",{id:t.url,url:t.url,name:t.name,films:t.films,species:r,homeworld:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),x=a.a.createContext(),S=new N({baseURL:"https://swapi.co/api"}),P=function(e){var t=e.children;return a.a.createElement(x.Provider,{value:S},t)},R=n(21);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(n,!0).forEach((function(t){Object(R.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D="REQUEST",M="SUCCESS",L="ERROR",T={loading:!1,result:void 0,error:void 0},_=function(e,t){switch(t.type){case D:return U({},e,{loading:!0,result:void 0,error:void 0});case M:return U({},e,{loading:!1,result:t.result,error:void 0});case L:return U({},e,{loading:!1,result:void 0,error:t.error});default:return e}},q={type:D},A=function(e){return{type:L,error:e}},F=function(e){return{type:M,result:e}};function G(e,t){var n=Object(r.useReducer)(_,T),a=Object(i.a)(n,2),c=a[0],l=a[1];return Object(r.useEffect)((function(){t.skip||(l(q),e(t.variables).then((function(e){l(F(e))})).catch((function(e){l(A(e))})))}),[t.skip,t.variables,e]),c}var H=function(){return a.a.createElement(g,null,a.a.createElement("img",{src:o.a,alt:"loading"}))},I=(n(37),function(e){var t=e.children;return a.a.createElement("div",{className:"error-message"},t)}),J=(n(38),function(e){var t=e.person,n=Object(r.useContext)(x),c=G(Object(r.useCallback)((function(){return n.getMovies(t)}),[n,t]),{skip:!t,variables:t}),l=c.loading,i=c.result,u=c.error;return a.a.createElement("div",{className:"movie"},l&&a.a.createElement(H,null),u&&a.a.createElement(I,null,"Oops... Something went wrong..."),!l&&!u&&!i&&a.a.createElement(I,null,"These are not the movies you are looking for"),i&&i.map((function(e){return a.a.createElement(g,{key:e.url,noMargin:!0},a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",{className:"list-item-label"},"Title"),a.a.createElement("div",null,e.title))),a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement("div",{className:"list-item-label"},"Release"),a.a.createElement("div",null,e.release_date))),a.a.createElement("div",{style:{flexGrow:5}},a.a.createElement("div",null,a.a.createElement("div",{className:"list-item-label"},"Opening"),a.a.createElement("div",null,e.opening_crawl.substring(0,150),"..."))))})))}),B={items:[],error:void 0};function K(e){var t=e.items,n=e.loading,c=e.error,l=Object(r.useState)(void 0),u=Object(i.a)(l,2),s=u[0],o=u[1];function m(e,t){"undefined"!==typeof t&&"Enter"!==t||o(e)}return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Found characters"),n&&a.a.createElement(H,null),c&&a.a.createElement(I,null,"Oops... Something went wrong..."),!n&&!c&&!t.length&&a.a.createElement(I,null,"These are not the characters you are looking for"),t.map((function(e){var t=s&&s.id===e.id;return a.a.createElement(a.a.Fragment,{key:e.id},a.a.createElement(g,{role:"button",noMargin:t,selected:t,tabIndex:"0",onClick:function(){return m(e)},onKeyPress:function(t){m(e,t.key)}},a.a.createElement("div",{className:"list-item-name",style:{flexGrow:2}},a.a.createElement("div",null,a.a.createElement("div",{className:"list-item-label"},"Name"),a.a.createElement("div",null,e.name))),a.a.createElement("div",{className:"list-item-meta"},a.a.createElement("div",{className:"list-item-home-name"},a.a.createElement("div",{className:"list-item-label"},"World"),a.a.createElement("div",null,e.homeworld.name)),a.a.createElement("div",{className:"list-item-home-species"},a.a.createElement("div",{className:"list-item-label"},"Species"),a.a.createElement("div",null,e.species.map((function(e){return e.name})).join(","))),a.a.createElement("div",{className:"list-item-home-population"},a.a.createElement("div",{className:"list-item-label"},"Population"),a.a.createElement("div",null,e.homeworld.population)))),t&&a.a.createElement(J,{person:s}))})))}K.defaultProps=B;var Q=K;n(39);var V=function(){var e=Object(r.useContext)(x),t=Object(r.useState)(void 0),n=Object(i.a)(t,2),c=n[0],l=n[1],u=G(Object(r.useCallback)((function(){return e.searchPeople(c)}),[e,c]),{skip:!c,variables:c}),s=u.loading,o=u.result,m=u.error;return a.a.createElement("div",{className:"container"},a.a.createElement(v,null,"CHARACTER SEARCH"),a.a.createElement(p,{loading:s,onSubmit:function(e){l(e.query)}}),c&&a.a.createElement(Q,{loading:s,error:m,items:o}))};var W=function(){return a.a.createElement(P,null,a.a.createElement(V,null))};n(40);l.a.render(a.a.createElement(W,null),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.b57c6bf0.chunk.js.map